var komli_domain="pubmatic.com";var curr_time=0;var cam_list=[];var site_list=[];function set_freq(){Set_Cookie("KTPCACOOKIE","YES",4,"/",komli_domain,"");pm_addEventListener_j(window,"unload",set_master_cookie,false)}function get_curr_time(){var a=document.cookie.split(";");for(i=0;i<a.length;i++){var c=a[i].split("=");if(c.length==2){var b=c[0].indexOf("_curtime");if(b>-1){curr_time=parseInt(c[1]);break}}}}function get_campaign_cookie_data(u,g){var n=0;var c=u.indexOf("camfreq");if(c>-1){master_string=u.substring(c+7,u.length);var e=master_string.indexOf("_");if(e>-1){n=0}else{n=1}}var r=0;var q=0;var p=0;var o=0;var b=-1;var s=[];var t;cookie_freq_data=g.split(":");for(r=0;r<cookie_freq_data.length;r++){cookie_nt_freq=cookie_freq_data[r].split("-");if(cookie_nt_freq.length!=2){break}t=cookie_nt_freq[1].split("_");if(t.length==2){if(n==1&&curr_time!=0){if(curr_time>parseInt(t[1])){continue}else{s[o++]=[parseInt(cookie_nt_freq[0]),parseInt(t[0]),parseInt(t[1])]}}else{s[o++]=[parseInt(cookie_nt_freq[0]),parseInt(t[0]),parseInt(t[1])]}}else{s[o++]=[parseInt(cookie_nt_freq[0]),parseInt(cookie_nt_freq[1]),0]}}var l=0;var a=0;var f=0;var d=0;var h=0;var m=0;if(s.length!=0){for(q=0;q<s.length;q++){a=s[q][1];f=s[q][0];d=s[q][2];l=0;for(r=0;r<cam_list.length;r++){h=cam_list[r][1];m=cam_list[r][0];old_time=cam_list[r][2];if(m==f){cam_list[r][1]=h+a;if(d>old_time){cam_list[r][2]=d}l=1}}if(l!=1){cam_list[cam_list.length]=s[q]}}}}function get_cookie_data(v,h){var c=v.indexOf("pubfreq_");var q=0;if(c>-1){master_string=v.substring(c+8,v.length);var f=master_string.indexOf("_");if(f>-1){q=parseInt(master_string.substring(0,f))}else{q=parseInt(v.substring(c+8,v.length))}}var s=0;var r=0;var p=0;var b=-1;var t=[];cookie_freq_data=h.split(":");for(s=0;s<cookie_freq_data.length;s++){cookie_nt_freq=cookie_freq_data[s].split("-");if(cookie_nt_freq.length!=2){break}t[s]=[parseInt(cookie_nt_freq[0]),parseInt(cookie_nt_freq[1])]}for(s=0;s<site_list.length;s++){var e=site_list[s][0];if(e==parseInt(q)){b=s}}if(t.length!=0){if(b==-1){site_list[(site_list.length)]=[parseInt(q),t]}else{var u=site_list[b][0];var m=site_list[b][1];var n=0;var a=0;var g=0;var d=0;var l=0;var o=0;for(r=0;r<t.length;r++){a=t[r][1];g=t[r][0];d=t[r][2];n=0;for(s=0;s<m.length;s++){l=m[s][1];o=m[s][0];if(o==g){m[s][1]=l+a;n=1}}if(n!=1){m[m.length]=[parseInt(t[r][0]),parseInt(t[r][1]),parseInt(t[r][2])]}}site_list[b][1]=m}}}function set_campaign_cookie(){get_curr_time();cookie_list=document.cookie.split(";");var b=[];var g;for(d=0;d<cookie_list.length;d++){g=cookie_list[d].split("=");if(g.length==2){var k=g[0].indexOf("camfreq");if(k>-1){get_campaign_cookie_data(g[0],g[1]);Delete_Cookie(g[0],"/",komli_domain)}}}var d=0;var c=0;var f="";var e=[];for(d=0;d<cam_list.length;d++){e=cam_list[d];if(d==0){f=e[0]+"-"+e[1]+"_"+e[2]}else{f=f+":"+e[0]+"-"+e[1]+"_"+e[2]}}var h=f;if(f!=""){Set_Cookie("camfreq",h,4,"/",komli_domain,"")}}function set_master_cookie(){set_campaign_cookie();var k=document.cookie.split(";");var f=0;var a;for(f=0;f<k.length;f++){a=k[f].split("=");if(a.length==2){var b=a[0].indexOf("pubfreq_");if(b>-1){get_cookie_data(a[0],a[1]);Delete_Cookie(a[0],"/",komli_domain)}}}var f=0;var e=0;var c=[];for(f=0;f<site_list.length;f++){var h=site_list[f][0];c=site_list[f][1];nt_list="";for(e=0;e<c.length;e++){if(e==0){nt_list=c[e][0]+"-"+c[e][1]}else{nt_list=nt_list+":"+c[e][0]+"-"+c[e][1]}}var d="pubfreq_"+h;var g=nt_list;if(nt_list!=""){Set_Cookie(d,g,3,"/",komli_domain,"")}}}function pm_addEventListener_j(c,b,d,a){if(c.addEventListener){c.addEventListener(b,d,a)}else{if(c.attachEvent){c.attachEvent("on"+b,d,a)}else{c["on"+b]=d}}}function Set_Cookie(b,g,c,k,d,a){var f=new Date();f.setTime(f.getTime());if(c){c=c*1000*60*60*24}var h=new Date(f.getTime()+(c));var e=b+"="+g+((c)?";expires="+h.toGMTString():"")+((k)?";path="+k:"")+((d)?";domain="+(d):"")+((a)?";secure":"");document.cookie=e}function Delete_Cookie(a,c,b){document.cookie=a+"="+((c)?";path="+c:"")+((b)?";domain="+b:"")+";expires=Thu, 01-Jan-1970 00:00:01 GMT"}function Cookie(b,a){this.name=b;this.ttl=30;if(a!=undefined&&a!=""){this.ttl=a}}Cookie.prototype={get:function(){if(this.name==""){return""}var d=""+document.cookie;var b=d.indexOf(this.name+"=");if(b==-1){return""}var a=d.indexOf(";",b);if(a==-1){a=d.length}return unescape(d.substring(b+this.name.length+1,a))},set:function(b){var a=new Date();a.setDate(a.getDate()+this.ttl);document.cookie=escape(this.name)+"="+escape(b)+"; expires="+a.toGMTString()+"; path=/"}};function PixelCookie(d){this.plist={};this.plimiter=".";this.vlimiter="_";if(d==undefined||d==""){return}var a=d.split(this.plimiter);for(var c=0;c<a.length;c++){var b=a[c].split(this.vlimiter);if(b[0]==undefined){continue}if(b[1]==undefined){continue}this.plist[b[0]]={};this.plist[b[0]]["ttl"]=b[1]}}PixelCookie.prototype={get_unexpired_ids:function(){var b=[];now_=new Date();etime=Math.round(now_.getTime()/1000);for(var a in this.plist){if(this.plist[a]["ttl"]>etime){b.push(a)}else{this.plist[a]["ttl"]=0}}return b},refresh:function(c,a){this.plist[c]={};var b=new Date();b.setDate(b.getDate()+a);etime=Math.round(b.getTime()/1000);this.plist[c]["ttl"]=etime},get:function(){var a="";for(var b in this.plist){if(this.plist[b]["ttl"]>0){a+=b+this.vlimiter+this.plist[b]["ttl"]+this.plimiter}}a=a.slice(0,-1);return a}};function Pixels(){this.pixels={};this.idlist=[];this.max_ttl=1}Pixels.prototype={add:function(d,a,b){var c=this.pixels.length;this.pixels[d]={};this.pixels[d]["ttl"]=a;this.pixels[d]["url"]=b;this.pixels[d]["expired"]=1;this.idlist.push(d);if(a>this.max_ttl){this.max_ttl=a}},select:function(b){cvalue="";pixeled=0;cookie=new Cookie("SyncRTB",this.max_ttl+1);cvalue=cookie.get();pcookie=new PixelCookie(cvalue);if(cvalue!=""){tlist=pcookie.get_unexpired_ids();for(a=0;a<tlist.length;a++){this.pixels[tlist[a]]["expired"]=0}}idlist=[];for(id in this.pixels){if(this.pixels[id]["expired"]){idlist.push(id)}}if(idlist.length<b){b=idlist.length}if(b<1){return}for(var a=0;a<b&&pixeled<b;a++){j=Math.floor(b*Math.random());id=idlist[j];if(id<0){a--;continue}src=["<iframe name='pframe"+j+"' width='0' height='0' frameborder='0' marginwidth='0' marginheight='0' vspace='0' hspace='0' allowtransparency='true' scrolling='no' src='",unescape(this.pixels[id]["url"]),"'></iframe>"].join(" ");document.write(src);pcookie.refresh(id,this.pixels[id]["ttl"]);idlist[j]=-1;pixeled++}cvalue=pcookie.get();cookie.set(cvalue)}};